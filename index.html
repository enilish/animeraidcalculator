<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Anime Raid Calculator</title>
<meta name="color-scheme" content="dark">
<style>
  :root { --bg:#0f0f18; --panel:#101326; --input:#0c0f1e; --border:#2a3052; --accent:#ffd342; --cyan:#9feaff; --ink:#fff; --muted:#9fb2d9; }
  html,body{height:100%}
  body{background:var(--bg);color:var(--ink);font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Arial;margin:0;padding:18px}
  .wrap{max-width:780px;margin:0 auto}
  h1{font-size:22px;margin:0 0 12px}
  .banner{padding:10px;border-radius:10px;margin-bottom:12px;font-weight:800;font-size:16px;text-align:center;border:1px solid #2a7a3a;background:#0f2a15}
  label{display:block;margin:8px 0 6px;color:#cfe0ff;font-size:13px}
  input,select{width:100%;padding:10px 12px;font-size:18px;border-radius:10px;border:1px solid var(--border);background:var(--input);color:var(--ink)}
  .grid2{display:grid;gap:10px;grid-template-columns:1fr 1fr}
  .btns{display:flex;gap:10px;margin:10px 0}
  button{appearance:none;border:0;border-radius:10px;padding:12px 14px;font-weight:800;cursor:pointer}
  #calc{background:var(--accent);color:#231b00}
  #reset{background:var(--cyan);color:#07222a}
  .card{background:var(--panel);border:1px solid var(--border);border-radius:12px;padding:12px;margin-top:10px}
  .row3{display:grid;gap:10px;grid-template-columns:repeat(3,1fr)}
  .stat{background:var(--input);border:1px solid var(--border);border-radius:10px;padding:10px}
  .name{color:var(--muted);font-size:12px}
  .value{font-size:20px;font-weight:800;margin-top:4px}
  .arrow{color:#27e37a;font-weight:900}
</style>
</head>
<body>
<div class="wrap">
  <div class="banner">✅ JS RUNNING — if you don’t see this banner, your page isn’t executing JavaScript</div>
  <h1>Anime Raid Calculator</h1>

  <label for="hp">HP</label>
  <input id="hp" type="number" placeholder="e.g., 8710000">

  <label for="atk">ATK</label>
  <input id="atk" type="number" placeholder="e.g., 1150000">

  <label for="def">DEF</label>
  <input id="def" type="number" placeholder="e.g., 73080">

  <div class="grid2" style="margin-top:8px">
    <div>
      <label for="fromStar">Current Star</label>
      <select id="fromStar">
        <option value="0.0">0★</option><option value="0.2">0.2★</option><option value="0.4">0.4★</option><option value="0.6">0.6★</option><option value="0.8">0.8★</option>
        <option value="1.0">1★</option><option value="1.2">1.2★</option><option value="1.4">1.4★</option><option value="1.6">1.6★</option><option value="1.8">1.8★</option>
        <option value="2.0">2★</option><option value="2.2">2.2★</option><option value="2.4">2.4★</option><option value="2.6">2.6★</option><option value="2.8">2.8★</option>
        <option value="3.0">3★</option><option value="3.2">3.2★</option><option value="3.4">3.4★</option><option value="3.6">3.6★</option><option value="3.8">3.8★</option>
        <option value="4.0">4★</option><option value="4.2">4.2★</option>
      </select>
    </div>
    <div>
      <label for="toStar">Target Star</label>
      <select id="toStar">
        <option value="0.0">0★</option><option value="0.2">0.2★</option><option value="0.4">0.4★</option><option value="0.6">0.6★</option>
        <option value="0.8">0.8★ (Dupe 1)</option><option value="1.0">1★</option>
        <option value="1.2">1.2★ (Dupe 2)</option><option value="1.4">1.4★</option>
        <option value="1.6">1.6★ (Dupe 3)</option><option value="1.8">1.8★</option>
        <option value="2.0">2★</option><option value="2.2">2.2★</option><option value="2.4">2.4★</option><option value="2.6">2.6★</option><option value="2.8">2.8★</option>
        <option value="3.0">3★</option><option value="3.2">3.2★</option><option value="3.4">3.4★</option><option value="3.6">3.6★</option><option value="3.8">3.8★</option>
        <option value="4.0">4★</option><option value="4.2">4.2★</option>
      </select>
    </div>
  </div>

  <div class="btns">
    <button id="calc">Calculate</button>
    <button id="reset">Reset</button>
  </div>

  <div class="card">
    <div class="row3">
      <div class="stat"><div class="name">% Increase</div><div class="value" id="pct">—</div></div>
      <div class="stat"><div class="name">Fragments Needed</div><div class="value" id="frags">—</div></div>
      <div class="stat"><div class="name">Dupes Needed</div><div class="value" id="dupes">—</div></div>
    </div>
    <div class="row3" style="margin-top:10px">
      <div class="stat"><div class="name">HP</div><div class="value"><span id="hp0">—</span> <span class="arrow">→</span> <span id="hp1">—</span></div></div>
      <div class="stat"><div class="name">ATK</div><div class="value"><span id="atk0">—</span> <span class="arrow">→</span> <span id="atk1">—</span></div></div>
      <div class="stat"><div class="name">DEF</div><div class="value"><span id="def0">—</span> <span class="arrow">→</span> <span id="def1">—</span></div></div>
    </div>
  </div>
</div>

<script>
var STAR_PCT=[
  {star:0.0,pct:0},{star:0.2,pct:20},{star:0.4,pct:36},{star:0.6,pct:50},{star:0.8,pct:62},
  {star:1.0,pct:73},{star:1.2,pct:88},{star:1.4,pct:101},{star:1.6,pct:112},{star:1.8,pct:122},
  {star:2.0,pct:131},{star:2.2,pct:145},{star:2.4,pct:157},{star:2.6,pct:168},{star:2.8,pct:178},
  {star:3.0,pct:187},{star:3.2,pct:203},{star:3.4,pct:217},{star:3.6,pct:229},{star:3.8,pct:240},
  {star:4.0,pct:250},{star:4.2,pct:259}
];
function pctAt(v){ for(var i=0;i<STAR_PCT.length;i++){ if(STAR_PCT[i].star===v) return STAR_PCT[i].pct; } return 0; }

var STEPS=[
  {star:0.2,frag:2},{star:0.4,frag:2},{star:0.6,frag:2},{star:0.8,frag:2},
  {star:1.0,frag:5},{star:1.2,frag:5},{star:1.4,frag:5},{star:1.6,frag:5},{star:1.8,frag:5},
  {star:2.0,frag:15},{star:2.2,frag:15},{star:2.4,frag:15},{star:2.6,frag:15},{star:2.8,frag:15},
  {star:3.0,frag:40},{star:3.2,frag:40},{star:3.4,frag:40},{star:3.6,frag:40},{star:3.8,frag:40},
  {star:4.0,frag:100},{star:4.2,frag:100}
];
function fragmentsBetween(a,b){
  if(b<=a) return 0;
  var sum=0;
  for(var i=0;i<STEPS.length;i++){
    var r=STEPS[i];
    if(r.star>a && r.star<=b) sum+=r.frag;
  }
  return sum;
}
function dd(n){
  if(!isFinite(n)) return "—";
  if(Math.abs(n)>=1e9) return (n/1e9).toFixed(2)+"B";
  if(Math.abs(n)>=1e6) return (n/1e6).toFixed(2)+"M";
  if(Math.abs(n)>=1e3) return (n/1e3).toFixed(2)+"K";
  return n.toLocaleString();
}
function compute(){
  var hp  = parseFloat(document.getElementById('hp').value||"0");
  var atk = parseFloat(document.getElementById('atk').value||"0");
  var df  = parseFloat(document.getElementById('def').value||"0");
  var s0  = parseFloat(document.getElementById('fromStar').value);
  var s1  = parseFloat(document.getElementById('toStar').value);

  var delta = Math.max(0, pctAt(s1) - pctAt(s0));
  var mult  = 1 + delta/100;

  var frags = fragmentsBetween(s0, s1);
  var dupes = Math.ceil(frags/10);

  document.getElementById('pct').textContent   = delta + "%";
  document.getElementById('frags').textContent = dd(frags);
  document.getElementById('dupes').textContent = dd(dupes);

  document.getElementById('hp0').textContent = dd(hp);
  document.getElementById('atk0').textContent= dd(atk);
  document.getElementById('def0').textContent= dd(df);
  document.getElementById('hp1').textContent = dd(hp*mult);
  document.getElementById('atk1').textContent= dd(atk*mult);
  document.getElementById('def1').textContent= dd(df*mult);
}
function resetAll(){
  document.getElementById('hp').value="";
  document.getElementById('atk').value="";
  document.getElementById('def').value="";
  document.getElementById('fromStar').value="0.0";
  document.getElementById('toStar').value="0.0";
  compute();
}
(function(){
  var ids=['hp','atk','def','fromStar','toStar'];
  for(var i=0;i<ids.length;i++){
    var el=document.getElementById(ids[i]);
    el.addEventListener('input', compute);
    el.addEventListener('change', compute);
  }
  document.getElementById('calc').addEventListener('click', compute);
  document.getElementById('reset').addEventListener('click', resetAll);
  compute();
})();
</script>
</body>
</html>